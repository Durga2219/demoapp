flowchart TD
    A[Landing Page] --> B{User Logged In?}
    
    B -->|No| C[Authentication Page]
    B -->|Yes| D[Dashboard]
    
    C --> E[Register/Login Form]
    E --> F{Registration or Login?}
    
    F -->|Register| G[User Registration Form]
    F -->|Login| H[Login Form]
    
    G --> I[Profile Picture Upload]
    I --> J[Role Selection: Driver/Passenger]
    J --> K[Submit Registration]
    K --> L[Email Verification Required]
    L --> M[Check Email & Verify]
    M --> N[Account Activated]
    N --> O[Login Success]
    
    H --> P{Valid Credentials?}
    P -->|No| Q[Show Error Message]
    Q --> H
    P -->|Yes| R{Email Verified?}
    R -->|No| S[Verification Required Message]
    S --> M
    R -->|Yes| O
    
    O --> T{User Role?}
    T -->|Driver| U[Driver Dashboard]
    T -->|Passenger| V[Passenger Dashboard]
    
    %% Driver Flow
    U --> W{Driver Verified?}
    W -->|No| X[Driver Verification Form]
    W -->|Yes| Y[Driver Main Menu]
    
    X --> Z[License Details Form]
    Z --> AA[Vehicle Registration Form]
    AA --> BB[Submit Verification]
    BB --> CC[Verification Success]
    CC --> Y
    
    Y --> DD[Driver Actions Menu]
    DD --> EE[Post New Ride]
    DD --> FF[View My Rides]
    DD --> GG[Manage Vehicles]
    DD --> HH[View Bookings]
    DD --> II[Profile Settings]
    
    %% Post Ride Flow
    EE --> JJ[Select Vehicle]
    JJ --> KK[Route Details Form]
    KK --> LL[Set Departure Time]
    LL --> MM[Set Available Seats]
    MM --> NN[Set Base Fare]
    NN --> OO[Add Description]
    OO --> PP[Submit Ride]
    PP --> QQ[Ride Posted Successfully]
    QQ --> Y
    
    %% View My Rides
    FF --> RR[List of Driver's Rides]
    RR --> SS[Select Ride]
    SS --> TT[Ride Details View]
    TT --> UU[Edit Ride]
    TT --> VV[Cancel Ride]
    TT --> WW[View Ride Bookings]
    
    UU --> XX[Edit Ride Form]
    XX --> YY[Update Ride]
    YY --> RR
    
    VV --> ZZ[Cancellation Reason]
    ZZ --> AAA[Confirm Cancellation]
    AAA --> RR
    
    WW --> BBB[List of Bookings]
    BBB --> CCC[Booking Details]
    CCC --> DDD[Confirm Booking]
    CCC --> EEE[Cancel Booking]
    
    %% Vehicle Management
    GG --> FFF[List My Vehicles]
    FFF --> GGG[Add New Vehicle]
    GGG --> HHH[Vehicle Registration Form]
    HHH --> III[Submit Vehicle]
    III --> FFF
    
    %% Passenger Flow
    V --> JJJ[Passenger Main Menu]
    JJJ --> KKK[Search Rides]
    JJJ --> LLL[My Bookings]
    JJJ --> MMM[Booking History]
    JJJ --> II
    
    %% Search Rides Flow
    KKK --> NNN[Search Form]
    NNN --> OOO[Enter Source City]
    OOO --> PPP[Enter Destination City]
    PPP --> QQQ[Select Date]
    QQQ --> RRR[Submit Search]
    RRR --> SSS[Display Available Rides]
    
    SSS --> TTT[Select Ride]
    TTT --> UUU[View Ride Details]
    UUU --> VVV[Book Ride Button]
    
    VVV --> WWW[Booking Form]
    WWW --> XXX[Select Number of Seats]
    XXX --> YYY[Enter Pickup Location]
    YYY --> ZZZ[Enter Dropoff Location]
    ZZZ --> AAAA[Review Fare]
    AAAA --> BBBB[Confirm Booking]
    BBBB --> CCCC[Booking Confirmation]
    CCCC --> LLL
    
    %% My Bookings Flow
    LLL --> DDDD[List of Active Bookings]
    DDDD --> EEEE[Select Booking]
    EEEE --> FFFF[Booking Details]
    FFFF --> GGGG[Cancel Booking]
    FFFF --> HHHH[Contact Driver]
    FFFF --> IIII[View Ride Details]
    
    GGGG --> JJJJ[Cancellation Reason]
    JJJJ --> KKKK[Confirm Cancellation]
    KKKK --> LLL
    
    %% Profile Management
    II --> LLLL[Profile View]
    LLLL --> MMMM[Edit Profile]
    LLLL --> NNNN[Change Password]
    LLLL --> OOOO[Logout]
    
    MMMM --> PPPP[Update Profile Form]
    PPPP --> QQQQ[Save Changes]
    QQQQ --> LLLL
    
    NNNN --> RRRR[Change Password Form]
    RRRR --> SSSS[Verify Current Password]
    SSSS --> TTTT[Enter New Password]
    TTTT --> UUUU[Confirm New Password]
    UUUU --> VVVV[Update Password]
    VVVV --> LLLL
    
    OOOO --> WWWW[Confirm Logout]
    WWWW --> A
    
    %% Error Handling
    style Q fill:#ffcccc
    style S fill:#fff2cc
    style ZZ fill:#fff2cc
    style JJJJ fill:#fff2cc
    
    %% Success States
    style N fill:#ccffcc
    style CC fill:#ccffcc
    style QQ fill:#ccffcc
    style CCCC fill:#ccffcc
    style III fill:#ccffcc
    
    %% Main Navigation States
    style U fill:#cce5ff
    style V fill:#cce5ff
    style Y fill:#cce5ff
    style JJJ fill:#cce5ff
    
    %% Form States
    style G fill:#f0f0f0
    style X fill:#f0f0f0
    style NNN fill:#f0f0f0
    style WWW fill:#f0f0f0